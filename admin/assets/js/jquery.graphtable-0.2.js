!function(a){a.fn.graphTable=function(b,c){var d={series:"columns",labels:0,xaxis:0,firstSeries:1,lastSeries:null,dataStart:1,dataEnd:null,position:"after",width:null,height:null,min:0,max:0,dataTransform:null,labelTransform:null,xaxisTransform:null,colors:null};return a.extend(!0,d,b),d.lastSeries||(d.lastSeries="columns"==d.series?a("tr",a(this)).eq(d.labels).find("th,td").length-1:a("tr",a(this)).length-1),d.dataEnd||(d.dataEnd="rows"==d.series?a("tr",a(this)).eq(d.firstSeries).find("th,td").length-1:a("tr",a(this)).length-1),a(this).each(function(){var b=a(this);if(b.is("table")){d.width||(d.width=b.width()),d.height||(d.height=b.height());var e=d.min,f=d.max,g=a("tr",b),h=new Array;switch(d.series){case"rows":var k=g.eq(d.xaxis);for(i=d.firstSeries;i<=d.lastSeries;i++){var l=new Array;$dataRow=a("tr",b).eq(i);var m=a("th,td",$dataRow).eq(d.labels).text();for(d.labelTransform&&(m=d.labelTransform(m)),j=d.dataStart;j<=d.dataEnd;j++){var n=a("th,td",k).eq(j).text(),o=a("th,td",$dataRow).eq(j).text();d.dataTransform&&(o=d.dataTransform(o)),d.xaxisTransform&&(n=d.xaxisTransform(n)),test_x=parseFloat(n),test_y=parseFloat(o),test_y<e?e=test_y:test_y>f&&(f=test_y),l[l.length]=[n,o]}h[h.length]={label:m,data:l}}break;case"columns":var p=g.eq(d.labels);for(j=d.firstSeries;j<=d.lastSeries;j++){var q=new Array,m=p.find("th,td").eq(j).text();for(d.labelTransform&&(m=d.labelTransform(m)),i=d.dataStart;i<=d.dataEnd;i++){$cell=g.eq(i).find("th,td").eq(j);var o=$cell.text(),n=g.eq(i).find("th,td").eq(d.xaxis).text();d.dataTransform&&(o=d.dataTransform(o)),d.xaxisTransform&&(n=d.xaxisTransform(n)),test_x=parseFloat(n),test_y=parseFloat(o),test_y<e?e=test_y:test_y>f&&(f=test_y),q[q.length]=[n,o]}var r={label:m,data:q};d.colors&&d.colors[j-d.dataStart]&&(r.color=d.colors[j-d.dataStart]),h[h.length]=r}}switch(d.position){case"after":$div=a('<div class="flot-graph" />').insertAfter(b);break;case"replace":$div=a('<div class="flot-graph" />').insertAfter(b),b.remove();break;default:$div=a('<div class="flot-graph" />').insertBefore(b)}var s={yaxis:{min:e,max:f},title:"foo"};$div.width(d.width).height(d.height),a.extend(!0,s,c),a.plot($div,h,s)}})}}(jQuery);